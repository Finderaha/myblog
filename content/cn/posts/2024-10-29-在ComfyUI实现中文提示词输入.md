---
title: "在ComfyUI实现中文提示词输入"
date: 2024-10-29
author: Finder
slug: stable diffusion
draft: false
toc: true
tags: 
  - Stable Diffusion 系统课
  - ComfyUI
  - AI
---

Comfy UI 中实现中文提示词的书写，主要通过以下步骤和节点进行操作：

## 中文提示词

### **1. 节点管理与安装扩展**

- 双击空白处，搜索 `translate`，查看是否出现六个翻译节点。
- 如果没有出现，前往管理器，点击节点管理，搜索并安装 `ALEKPET` 扩展。
- 安装完成后重启，再次搜索 `translate`，即可看到相关节点。

### **2. 选择翻译节点**

- **Argos 翻译**：完全本地翻译，无需网络，适合快速翻译。输入格式为 `zh`（中文简体）到 `EN`（英文）。
- **Google Translate**：需要网络，选择 `from` 为 `auto`，系统会自动检测输入语言，适合多种语言的翻译。
- **Clip 文本编码器**（翻译高级）：也可自动检测语言，支持多个 API 接口（如 Google、MyMemory 等），灵活切换。

### **3. 展示英文翻译**

- 可通过双击空白处，搜索“展示文本”或“预览文本”来查看英文翻译。
- 连接翻译节点的“字符串”和展示文本节点的“文本”，以便实时查看翻译结果。

<aside>
💡

**提升测试效率**

1. 在测试翻译节点时，为了避免渲染图像影响速度，可以使用快捷键：
- **Ctrl + B**：忽略当前节点功能，保持节点连接。
- **Ctrl + M**：忽略当前节点及其前后连接节点，完全断开。
1. 在添加节点时，可以点击上个节点尾部，拖拽就会出现提示，会提示常用的几个节点，方便快速添加。
</aside>

## 分类分段提示词

当我们希望将提示按照主体、主体特征、风格、镜头、环境等分类分段填写时，借助“字符床操作”节点可以快速实现。

![image.png](%E5%9C%A8ComfyUI%E5%AE%9E%E7%8E%B0%E4%B8%AD%E6%96%87%E6%8F%90%E7%A4%BA%E8%AF%8D%E8%BE%93%E5%85%A5%2012e5f3cdf14b80798214e8342f3220dc/image.png)

### 1. 双击空白处，搜索“字符串操作”

- 在‘字符串操作’节点中，append代表叠加，replace代表上面输入框内容覆盖下面输入框内容，通常选择append即可。
- 在‘字符串操作’节点中，整个词条 选择 yes即可。

### 2. 选择‘clip文本编码器’节点，右键-转化为输入-转化文本为输入

- 此时clip文本编码器节点中的输入框会消失不见，变成一个输入节点
- 将‘字符床操作’的尾部链接到该输入节点即可

### 3. 选择‘字符床操作’节点，右键-转化为输入-转化文本A/B/C 为输入

- 添加‘翻译文本(argos翻译)’节点，复制3个相同节点
- 将‘翻译文本(argos翻译)’节点的‘字符串’链接到‘字符串操作’节点对应输入文本上

### 4. 添加‘自动负面关键词’节点

- 找到管理器-节点管理-one button prompt, install
- 如果无法成功安装，可以在chrome中搜索‘one button prompt comfyui’-点击github-下载zip文件，找到comfyui根目录-custom_nodes，解压后删掉压缩包，重启comfyui即可
- 双击，搜索‘自动负面提示词’，添加即可
    - 增强负面添加到1
    - 随机强度为0
    - base_model 根据大模型版本进行选择
- 将负面提示词的‘clip文本编码器’的组件转化为输入，链接到‘自动负面提示词’即可。