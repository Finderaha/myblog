<script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><a name="top"></a>
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Finder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
     
  </head>
  
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav" >
      <a href="/" class="nav-logo">
        <img src="/media/hugo-logo.png"
         width="50"
         height="50"
         alt="Hugo-ht">
      </a>

      <ul class="nav-links" >
        
        
           <li><a href="/">主页</a></li>
       
           <li><a href="/cn/posts/">日志</a></li>
       
           <li><a href="/cn/about/">关于</a></li>
       
           <li><a href="/en/posts/">English</a></li>
       
       
      </ul>
</nav>

      </header>

<main class = "content" role="main">
<div style="text-align: center">

<h1>图生图基础工作流搭建&#43;人物转绘&#43;Controlnet线稿应用</h1>

<p>Finder 
 / 2024-11-01 </p>

<hr/>
</div>

<span class="article-toolbar">
  
  
  
  
  
  
  
  <a href='https://github.com/UFinderaha/myblog/edit/main/content/cn%5cposts%5c2024-11-01-%e5%9b%be%e7%94%9f%e5%9b%be%e5%9f%ba%e7%a1%80%e5%b7%a5%e4%bd%9c%e6%b5%81%e6%90%ad%e5%bb%ba.md'style="font-size: 24px; color: black;" target="_blank"><i class="fa fa-edit" aria-hidden="true" title="编辑本页"></i>
  </a>
  
  
  
</span>


<aside class="toc">
Table of Contents:
<nav id="TableOfContents">
  <ol>
    <li><a href="#图生图的主要用途"><strong>图生图的主要用途</strong>：</a></li>
    <li><a href="#图生图的工作流搭建"><strong>图生图的工作流搭建</strong>：</a>
      <ol>
        <li><a href="#1-图像加载节点和-vae-编码器">1. 图像加载节点和 VAE 编码器</a></li>
        <li><a href="#2-增加复制latent批次节点">2. 增加‘复制latent批次’节点</a></li>
        <li><a href="#3-k采样器-降噪参数的调整"><strong>3. K采样器 降噪参数的调整</strong></a></li>
        <li><a href="#4-添加图像缩放节点">4. 添加‘图像缩放’节点</a></li>
        <li><a href="#5-生成后对比工具">5. <strong>生成后对比工具</strong></a></li>
      </ol>
    </li>
    <li><a href="#控制网control-net的使用"><strong>控制网（Control Net）的使用</strong>：</a>
      <ol>
        <li><a href="#1-选择合适的大模型"><strong>1. 选择合适的大模型</strong>：</a></li>
        <li><a href="#2-controlnet加载器和controlnet应用">2. ControlNet加载器和ControlNet应用</a></li>
        <li><a href="#3-添加预处理器">3. 添加预处理器</a></li>
      </ol>
    </li>
    <li><a href="#自定义生成提示音"><strong>自定义生成提示音</strong>：</a></li>
  </ol>
</nav>
</aside>


<div class="body-text list-text">
<p>图生图（Image-to-Image）的工作流和其核心用途，包括风格转换、细节增强、清晰度提升、人脸和手部修复等多个方面。</p>
<h2 id="图生图的主要用途"><strong>图生图的主要用途</strong>：<a href="#图生图的主要用途" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<ul>
<li>风格转绘：将现有图像转为其他风格，比如将写实人物变为动漫风格。</li>
<li>让画面更加丰富：增加图像细节，让画面更丰富。</li>
<li>提升图像的清晰度。</li>
<li>修复面部和手部。</li>
<li>扩充图像尺寸。</li>
</ul>
<h2 id="图生图的工作流搭建"><strong>图生图的工作流搭建</strong>：<a href="#图生图的工作流搭建" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<h3 id="1-图像加载节点和-vae-编码器">1. 图像加载节点和 VAE 编码器<a href="#1-图像加载节点和-vae-编码器" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<ul>
<li>与文生图（Text-to-Image）类似，但增加了两个新节点：“图像加载”节点和 VAE 编码器。</li>
<li>图像加载节点用于加载图像，VAE 编码器将图像从像素空间转换到潜在空间。</li>
<li>将checkpiont加载器(简易) 的 VAE 和‘加载图片’节点中的图像 链接到VAE编码器上，将VAE编码器latent链接到K采样器节点的latent上，此时，空latent就不需要了。</li>
</ul>
<h3 id="2-增加复制latent批次节点">2. 增加‘复制latent批次’节点<a href="#2-增加复制latent批次节点" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>添加‘’’节点控制单次生成图片的数量</p>
<ul>
<li>添加‘复制latent批次’节点，将其放在VAE编码器和K采样器之间</li>
<li>缩放方法选择默认，裁剪建议使用center(中心裁剪)的方式</li>
</ul>
<h3 id="3-k采样器-降噪参数的调整"><strong>3. K采样器 降噪参数的调整</strong><a href="#3-k采样器-降噪参数的调整" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>降噪参数用于控制图像的重绘幅度。</p>
<ul>
<li>降噪=denoising=重绘幅度，阈值在0 - 1 之间。</li>
<li>值越高，生成图像与原图相似度越低；值越低，相似度越高。适当调节降噪值可以实现保留原图特征的同时进行风格转换。</li>
</ul>
<h3 id="4-添加图像缩放节点">4. 添加‘图像缩放’节点<a href="#4-添加图像缩放节点" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>图像缩放节点控制生成图像的比例。</p>
<ul>
<li>将图像缩放节点添加到‘加载图像’与‘VAE编码’之间</li>
</ul>
<h3 id="5-生成后对比工具">5. <strong>生成后对比工具</strong><a href="#5-生成后对比工具" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>图像对比节点可以直观展示原图和生成图之间的差异，让用户一目了然看到风格转换的效果。</p>
<ul>
<li>管理器-节点管理-搜索rgthree,安装后，重启comfyUI</li>
<li>双击搜索-添加‘图像对比’节点</li>
</ul>
<h2 id="控制网control-net的使用"><strong>控制网（Control Net）的使用</strong>：<a href="#控制网control-net的使用" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<p>控制网可以精细控制图像的结构和形状，确保在转换风格时保持人物的轮廓不变。添加 Control Net 应用模块和预处理器可以达到更精确的风格转换效果。</p>
<h3 id="1-选择合适的大模型"><strong>1. 选择合适的大模型</strong>：<a href="#1-选择合适的大模型" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>使用特定风格的大模型决定生成的图像风格，例如写实风格或动漫风格模型。选择合适的模型可以在最大程度上实现预期的转换效果。</p>
<h3 id="2-controlnet加载器和controlnet应用">2. ControlNet加载器和ControlNet应用<a href="#2-controlnet加载器和controlnet应用" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<ul>
<li>添加ControlNet加载器和ControlNet应用</li>
<li>大模型什么版本就选什么版本的控制网络模型版本，1.5和2.1版本是共通的，XL模型有专门的XL Controlnet</li>
</ul>
<h3 id="3-添加预处理器">3. 添加预处理器<a href="#3-添加预处理器" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>根据Controlnet对应的模型，添加对应的预处理器</p>
<aside>
💡
<p>LineArt艺术线预处理器</p>
<ul>
<li>粗糙化：管控Controlnet模型强度，强度越高，生成的图片与预处理的图像越相似。</li>
<li>分辨率：</li>
</ul>
</aside>
<h2 id="自定义生成提示音"><strong>自定义生成提示音</strong>：<a href="#自定义生成提示音" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<p>可以在节点中添加提示音功能，在生成完成后播放音效。通过自定义音频文件，还可以为生成过程添加个性化提示音。</p>
<ul>
<li>添加“播放声音”节点</li>
<li>如果找不到，管理器-节点管理-搜索Custom Script - 安装重启</li>
<li>将输入链接到VAE解码图像上即可</li>
<li>如果声音不喜欢，则在 根目录 - custom nodes - custom scripts web - js - assets 添加声音mp3</li>
</ul>


  
    
      <a href="http://localhost:1313//tags/stable-diffusion-%E7%B3%BB%E7%BB%9F%E8%AF%BE/">#Stable Diffusion 系统课</a>
    
      <a href="http://localhost:1313//tags/comfyui/">#ComfyUI</a>
    
      <a href="http://localhost:1313//tags/ai/">#AI</a>
    
  

<p style="color:#777;">最后一次修改于 2024-11-01</p>
</div>
<a href="#top"><i class="fa fa-chevron-up" style="font-size: 30px; color: black;"></i></a>

</main>

<footer class="footer">
  <div class="content">

<script src="https://giscus.app/client.js"
        data-repo="finderaha/myblog"
        data-repo-id="R_kgDOLxcP2A"
        data-category="Announcements"
        data-category-id="DIC_kwDOLxcP2M4Ce2as"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>
</br>
 
</div>

  <script type="text/javascript" src="/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript" src="/js/center-img.js"></script>



     <ul class="footer-links">
      
       
       
       
       <li><a href="/cn/posts/index.xml" type="application/rss+xml" title="RSS feed">
       订阅 </a>
       </li>
       
       
       <li>
       
       <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">
       
        版权
        <i class="fa fa-cc" aria-hidden="true" title="Attribution-NonCommercial-ShareAlike 4.0 International"></i> 
        </a>
       </li>
       
     </ul>
     <div class="copyright-text">
            
            ©
            
            郝志杰
            
            2024
            
     </div>

</footer>





